{"version":3,"file":"portfolio/view.js","mappings":"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","sources":["webpack://pawsome-portfolio/./src/portfolio/view.js"],"sourcesContent":["/**\n * Use this file for JavaScript code that you want to run in the front-end\n * on posts/pages that contain this block.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\n\ndocument.addEventListener('DOMContentLoaded', function () {\n\n\tconst portfolioItems = document.querySelectorAll('.pawsome-portfolio-item');\n\tconst tagButtons = document.querySelectorAll('.pawsome-portfolio-tag-button');\n\tconst clearButton = document.createElement('button');\n\tconst params = new URLSearchParams(window.location.search);\n\tlet selectedTags = params.get('tags') ? params.get('tags').split(',').map(Number) : [];\n\n\tclearButton.textContent = 'Clear Tags';\n\tclearButton.className = 'clear-tags-button';\n\n\t// Append the clear button after the last tag button\n\tif (tagButtons.length > 0) {\n\t\ttagButtons[tagButtons.length - 1].parentNode.appendChild(clearButton);\n\t}\n\n\ttagButtons.forEach(button => {\n\t\tbutton.addEventListener('click', function () {\n\t\t\tconst tagId = parseInt(this.getAttribute('data-tag-id'));\n\t\t\tconst index = selectedTags.indexOf(tagId);\n\t\t\tif (index > -1) {\n\t\t\t\t// Remove tag from array\n\t\t\t\tselectedTags.splice(index, 1);\n\t\t\t\tthis.classList.remove('active');\n\t\t\t} else {\n\t\t\t\t// Add tag to array\n\t\t\t\tselectedTags.push(tagId);\n\t\t\t\tthis.classList.add('active');\n\t\t\t}\n\t\t\tfilterPosts();\n\t\t});\n\t});\n\n\t// Clear all selected tags\n\tclearButton.addEventListener('click', function () {\n\t\tselectedTags = [];\n\t\ttagButtons.forEach(button => button.classList.remove('active'));\n\t\tportfolioItems.forEach(item => item.style.display = '');\n\t});\n\n\t// Update URL with a query string for selected tags\n\ttagButtons.forEach(tag => {\n\t\ttag.addEventListener('click', function () {\n\t\t\tconst tagId = parseInt(this.dataset.tagId);\n\t\t\tconst params = new URLSearchParams(window.location.search);\n\t\t\tlet selectedTags = params.get('tags') ? params.get('tags').split(',').map(Number) : [];\n\n\t\t\tconst index = selectedTags.indexOf(tagId);\n\t\t\tif (index > -1) {\n\t\t\t\t// Remove tag if it's already in the array\n\t\t\t\tselectedTags.splice(index, 1);\n\t\t\t} else {\n\t\t\t\t// Add tag to the array\n\t\t\t\tselectedTags.push(tagId);\n\t\t\t}\n\n\t\t\t// Update the URL, converting array to comma-separated string\n\t\t\tparams.set('tags', selectedTags.join(','));\n\t\t\twindow.history.replaceState({}, '', `${window.location.pathname}?${params}`);\n\t\t});\n\t});\n\n\t// Ensures that tags in query string are filtered on page load\n\tselectedTags.forEach(tagId => {\n\t\tconst tagElement = document.querySelector(`.pawsome-portfolio-tag-button[data-tag-id=\"${tagId}\"]`);\n\t\tif (tagElement) {\n\t\t\ttagElement.classList.add('active');\n\t\t}\n\t\tfilterPosts();\n\t});\n\n\t// Filter posts based on selected tags\n\tfunction filterPosts() {\n\t\tif (selectedTags.length > 0) {\n\t\t\tportfolioItems.forEach(item => {\n\t\t\t\tconst tags = JSON.parse(item.getAttribute('data-tag-ids'));\n\t\t\t\tconst isMatch = tags.some(tag => selectedTags.includes(tag));\n\t\t\t\titem.style.display = isMatch ? '' : 'none';\n\t\t\t});\n\t\t} else {\n\t\t\tportfolioItems.forEach(item => item.style.display = '');\n\t\t}\n\t}\n\n\t// Build modal lightbox to display portfolio item content\n\tconst portfolioContainer = document.querySelector('.pawsome-portfolio');\n\tconst linkBehavior = portfolioContainer.getAttribute('data-link-behavior');\n\n\t// Only if the link behavior has been set to modal\n\tif (linkBehavior === 'modal') {\n\t\tconst modal = document.getElementById('pawsome-modal-container');\n\t\tconst closeButton = modal.querySelector('.close');\n\n\t\t// Add click event listeners to each portfolio item\n\t\tportfolioItems.forEach(item => {\n\t\t\titem.addEventListener('click', function () {\n\t\t\t\tconst postId = this.dataset.postId;\n\t\t\t\tfetch(`/wp-json/wp/v2/pawsome_item/${postId}`)\n\t\t\t\t\t.then(response => response.json())\n\t\t\t\t\t.then(post => {\n\t\t\t\t\t\tshowModal(post);\n\t\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\tlet lastFocusedElement;\n\n\t\t// Function to open the modal\n\t\tasync function showModal(post) {\n\t\t\tlastFocusedElement = document.activeElement; // Save the currently focused element\n\t\t\tconst modalContent = modal.querySelector('.pawsome-modal-content');\n\t\t\tmodalContent.innerHTML = `\n\t            <h2>${post.title.rendered}</h2>\n\t            ${post.featured_image_src ? `<img src=\"${post.featured_image_src}\" alt=\"${post.title.rendered}\">` : ''}\n\t            ${post.content.rendered}\n\t        `;\n\t\t\tmodal.style.display = 'flex';\n\t\t\tmodalContent.focus();\n\t\t}\n\n\t\t// Function to close the modal\n\t\tfunction closeModal() {\n\t\t\tmodal.style.display = 'none';\n\t\t\tif (lastFocusedElement) { // Return focus to the element that opened the modal\n\t\t\t\tlastFocusedElement.focus();\n\t\t\t}\n\t\t}\n\n\t\t// Event listener for close button\n\t\tcloseButton.addEventListener('click', closeModal);\n\n\t\t// Event listener for escape key\n\t\tdocument.addEventListener('keydown', function (event) {\n\t\t\tif (event.key === 'Escape') {\n\t\t\t\tcloseModal();\n\t\t\t}\n\t\t});\n\n\t\t// Event listener for clicking anywhere outside of the modal content\n\t\tmodal.addEventListener('click', function (event) {\n\t\t\tif (event.target === modal) {\n\t\t\t\tcloseModal();\n\t\t\t}\n\t\t});\n\t}\n\n});\n"],"names":["document","addEventListener","portfolioItems","querySelectorAll","tagButtons","clearButton","createElement","params","URLSearchParams","window","location","search","selectedTags","get","split","map","Number","textContent","className","length","parentNode","appendChild","forEach","button","tagId","parseInt","getAttribute","index","indexOf","splice","classList","remove","push","add","filterPosts","item","style","display","tag","dataset","set","join","history","replaceState","pathname","tagElement","querySelector","tags","JSON","parse","isMatch","some","includes","portfolioContainer","linkBehavior","modal","getElementById","closeButton","postId","fetch","then","response","json","post","showModal","lastFocusedElement","activeElement","modalContent","innerHTML","title","rendered","featured_image_src","content","focus","closeModal","event","key","target"],"sourceRoot":""}