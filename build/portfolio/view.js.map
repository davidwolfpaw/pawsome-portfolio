{"version":3,"file":"portfolio/view.js","mappings":"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","sources":["webpack://pawsome-portfolio/./src/portfolio/view.js"],"sourcesContent":["/**\n * Use this file for JavaScript code that you want to run in the front-end\n * on posts/pages that contain this block.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\n\ndocument.addEventListener('DOMContentLoaded', function () {\n\n\tconst portfolioItems = document.querySelectorAll('.pawsome-portfolio-item');\n\tconst buttons = document.querySelectorAll('.pawsome-portfolio-tag-button');\n\tconst clearButton = document.createElement('button');\n\n\tclearButton.textContent = 'Clear Tags';\n\tclearButton.className = 'clear-tags-button';\n\n\t// Append the clear button after the last tag button\n\tif (buttons.length > 0) {\n\t\tbuttons[buttons.length - 1].parentNode.appendChild(clearButton);\n\t}\n\n\tlet selectedTags = [];\n\n\tbuttons.forEach(button => {\n\t\tbutton.addEventListener('click', function () {\n\t\t\tconst tagId = parseInt(this.getAttribute('data-tag-id'));\n\t\t\tconst index = selectedTags.indexOf(tagId);\n\t\t\tif (index > -1) {\n\t\t\t\t// Remove tag from array\n\t\t\t\tselectedTags.splice(index, 1);\n\t\t\t\tthis.classList.remove('active');\n\t\t\t} else {\n\t\t\t\t// Add tag to array\n\t\t\t\tselectedTags.push(tagId);\n\t\t\t\tthis.classList.add('active');\n\t\t\t}\n\t\t\tfilterPosts();\n\t\t});\n\t});\n\n\t// Clear all selected tags\n\tclearButton.addEventListener('click', function () {\n\t\tselectedTags = [];\n\t\tbuttons.forEach(button => button.classList.remove('active'));\n\t\tportfolioItems.forEach(item => item.style.display = '');\n\t});\n\n\t// Filter posts based on selected tags\n\tfunction filterPosts() {\n\t\tif (selectedTags.length > 0) {\n\t\t\tportfolioItems.forEach(item => {\n\t\t\t\tconst tags = JSON.parse(item.getAttribute('data-tag-ids'));\n\t\t\t\tconst isMatch = tags.some(tag => selectedTags.includes(tag));\n\t\t\t\titem.style.display = isMatch ? '' : 'none';\n\t\t\t});\n\t\t} else {\n\t\t\tportfolioItems.forEach(item => item.style.display = '');\n\t\t}\n\t}\n\n\t// Build modal lightbox to display portfolio item content\n\tconst portfolioContainer = document.querySelector('.pawsome-portfolio');\n\tconst linkBehavior = portfolioContainer.getAttribute('data-link-behavior');\n\n\t// Only if the link behavior has been set to modal\n\tif (linkBehavior === 'modal') {\n\t\tconst modal = document.getElementById('pawsome-modal-container');\n\t\tconst closeButton = modal.querySelector('.close');\n\n\t\t// Add click event listeners to each portfolio item\n\t\tportfolioItems.forEach(item => {\n\t\t\titem.addEventListener('click', function () {\n\t\t\t\tconst postId = this.dataset.postId;\n\t\t\t\tfetch(`/wp-json/wp/v2/pawsome_item/${postId}`)\n\t\t\t\t\t.then(response => response.json())\n\t\t\t\t\t.then(post => {\n\t\t\t\t\t\tshowModal(post);\n\t\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\tlet lastFocusedElement;\n\n\t\t// Function to open the modal\n\t\tasync function showModal(post) {\n\t\t\tlastFocusedElement = document.activeElement; // Save the currently focused element\n\t\t\tconst modalContent = modal.querySelector('.pawsome-modal-content');\n\t\t\tmodalContent.innerHTML = `\n\t            <h2>${post.title.rendered}</h2>\n\t            ${post.featured_image_src ? `<img src=\"${post.featured_image_src}\" alt=\"${post.title.rendered}\">` : ''}\n\t            <p>${post.content.rendered}</p>\n\t        `;\n\t\t\tmodal.style.display = 'flex';\n\t\t\tmodalContent.focus();\n\t\t}\n\n\t\t// Function to close the modal\n\t\tfunction closeModal() {\n\t\t\tmodal.style.display = 'none';\n\t\t\tif (lastFocusedElement) { // Return focus to the element that opened the modal\n\t\t\t\tlastFocusedElement.focus();\n\t\t\t}\n\t\t}\n\n\t\t// Event listener for close button\n\t\tcloseButton.addEventListener('click', closeModal);\n\n\t\t// Event listener for escape key\n\t\tdocument.addEventListener('keydown', function (event) {\n\t\t\tif (event.key === 'Escape') {\n\t\t\t\tcloseModal();\n\t\t\t}\n\t\t});\n\n\t\t// Event listener for clicking anywhere outside of the modal content\n\t\tmodal.addEventListener('click', function (event) {\n\t\t\tif (event.target === modal) {\n\t\t\t\tcloseModal();\n\t\t\t}\n\t\t});\n\t}\n\n});\n"],"names":["document","addEventListener","portfolioItems","querySelectorAll","buttons","clearButton","createElement","textContent","className","length","parentNode","appendChild","selectedTags","forEach","button","tagId","parseInt","getAttribute","index","indexOf","splice","classList","remove","push","add","filterPosts","item","style","display","tags","JSON","parse","isMatch","some","tag","includes","portfolioContainer","querySelector","linkBehavior","modal","getElementById","closeButton","postId","dataset","fetch","then","response","json","post","showModal","lastFocusedElement","activeElement","modalContent","innerHTML","title","rendered","featured_image_src","content","focus","closeModal","event","key","target"],"sourceRoot":""}